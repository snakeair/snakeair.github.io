import{p as e,P as t}from"./index-d06ba3ca.js";import{K as l,Y as n,Z as o,$ as a,a0 as s,d as c,r as i,a1 as u,w as r,N as m,j as d,a2 as f,T as p}from"../default/default-13a60026.js";const h="000000",v=["title","cancel","confirm","toolbar","columns-top","columns-bottom"],g=["title","loading","readonly","optionHeight","swipeDuration","visibleOptionNum","cancelButtonText","confirmButtonText"],y=(e="",t=h,l=void 0)=>({text:e,value:t,children:l});function b({areaList:e,columnsNum:t,columnsPlaceholder:l}){const{city_list:n={},county_list:o={},province_list:a={}}=e,s=+t>1,c=+t>2,i=new Map;Object.keys(a).forEach(e=>{i.set(e.slice(0,2),y(a[e],e,(()=>{if(s)return l.length>1?[y(l[1],h,c?[]:void 0)]:[]})()))});const u=new Map;if(s){const e=()=>{if(c)return l.length>2?[y(l[2])]:[]};Object.keys(n).forEach(t=>{const l=y(n[t],t,e());u.set(t.slice(0,4),l);const o=i.get(t.slice(0,2));o&&o.children.push(l)})}c&&Object.keys(o).forEach(e=>{const t=u.get(e.slice(0,4));t&&t.children.push(y(o[e],e))});const r=Array.from(i.values());if(l.length){const e=c?[y(l[2])]:void 0,t=s?[y(l[1],h,e)]:void 0;r.unshift(y(l[0],h,t))}return r}const[j,O]=l("area");const V=p(c({name:j,props:n({},o(e,g),{modelValue:String,columnsNum:a(3),columnsPlaceholder:s(),areaList:{type:Object,default:()=>({})}}),emits:["change","confirm","cancel","update:modelValue"],setup(e,{emit:l,slots:n}){const a=i([]),s=i(),c=u(()=>b(e)),p=(...e)=>l("change",...e),h=(...e)=>l("cancel",...e),y=(...e)=>l("confirm",...e);return r(a,t=>{const n=t.length?t[t.length-1]:"";n&&n!==e.modelValue&&l("update:modelValue",n)},{deep:!0}),r(()=>e.modelValue,t=>{if(t){t!==(a.value.length?a.value[a.value.length-1]:"")&&(a.value=[`${t.slice(0,2)}0000`,`${t.slice(0,4)}00`,t].slice(0,+e.columnsNum))}else a.value=[]},{immediate:!0}),m({confirm:()=>{var e;return null==(e=s.value)?void 0:e.confirm()},getSelectedOptions:()=>{var e;return(null==(e=s.value)?void 0:e.getSelectedOptions())||[]}}),()=>d(t,f({ref:s,modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,class:O(),columns:c.value,onChange:p,onCancel:h,onConfirm:y},o(e,g)),o(n,v))}}));export{V as A};
