import"./base-af380e57.js";import{v as s}from"./el-loading-6522769a.js";import{c as e,b as a}from"./axios-6a4eca55.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import{d as l,r as o,A as t,h as c,u as i,b as d,e as r,F as n,f as u,i as m,t as v,g as p,s as g,j as f,n as b,y as A,k as y,m as h,l as k,q as w,p as C,P as I,D as E,z as R,x as q}from"../default/default-0c4e0e14.js";import{p as z}from"./pactThree-41868e55.js";import{b as S,a as j,c as x,d as U}from"./book4-d632226a.js";import{e as X}from"./imgErr-3df638b0.js";import{a as J}from"./js.cookie-d59fc71c.js";import{c as Q}from"./util-bc24738a.js";import{s as T}from"./function-call-1ca45ddf.js";import"./mount-component-dce9f19a.js";const F={class:"money-banner"},H={class:"money-test"},K={class:"max-money"},B={class:"size-banner"},V={class:"blue"},L=["onClick"],P={class:"goods-title"},Z=["src"],D={class:"goods-data"},N={class:"blue"},O={class:"blue"},W={class:"blue"},M={class:"pact-main"},Y={class:"footer-main"},G={class:"page-pact-box"},_={class:"pact-list"},$=["href"],ss={class:"cloud"},es={class:"goods-layer"},as={class:"goods-layer-header"},ls={class:"info"},os={class:"red"},ts={class:"goods-list"},cs=["onClick"],is={class:"goods-title"},ds=["src"],rs={class:"goods-data"},ns={class:"blue"},us={class:"blue"},ms={class:"blue"},vs={class:"page-pact-box"},ps={class:"pact-list"},gs={class:"layer-book-box"},fs=q(l({__name:"api",setup(l){const{errImgFn:q}=X(),fs=w(),bs=C(),As=o(null),ys=o(!0),hs=o(!1),ks=o(0),ws=s=>{hs.value=!0,ks.value=s},Cs=o(!1);o(!1);const Is=o(!1),Es=()=>{Is.value=!Is.value},Rs=o(0),qs=()=>{Rs.value=Qs.value.filter(s=>s.selected).length,console.log(Rs.value)},zs=o(!1),Ss=()=>{zs.value=!zs.value,Ts.value.map(s=>{s.selected=zs.value}),zs.value?Rs.value=Ts.value.length:Rs.value=0},js=()=>{Is.value?(Rs.value=Qs.value.filter(s=>s.selected).length,0!==Rs.value?(Ts.value=Q(Qs.value.filter(s=>s.selected).concat(Qs.value.filter(s=>!s.selected&&!s.isApply))),Rs.value==Ts.value.length&&(zs.value=!0),Cs.value=!0):T({message:"请选择要申请服务提供方",duration:1e3})):T({message:"请先阅读并同意服务条约"})},xs=()=>{Is.value?0!==Ts.value.filter(s=>s.selected).length?Xs():T({message:"请选择要申请服务提供方",duration:1e3}):T({message:"请先阅读并同意服务条约",duration:1e3})},Us=()=>{Cs.value=!1},Xs=async()=>{let s=Ts.value.filter(s=>s.selected).map(s=>s.platformId);ys.value=!0;let e=fs.query.orderId,l={orderId:e,platformIds:s.join(",")},o=await a("api/v1/apiOrder/confirm",l),t=setTimeout(()=>{ys.value=!1,clearTimeout(t)},500);if("0000"==o.code){T({message:"申请成功",type:"success",duration:1e3});let s=o.data;s&&""!==s?window.location.href=s:bs.push({path:"/waiting",query:{orderId:e}})}else T({message:o.message,duration:1e3})},Js=()=>{bs.push({path:"/"})},Qs=o([]),Ts=o([]),Fs=o([]),Hs=o(0);(async()=>{let s=fs.query.orderId;if(s&&s.length>0){let a=`api/v1/apiOrder?orderId=${s}`,l=await e(a);ys.value=!1,"0000"==l.code?(Qs.value=l.data,Fs.value=Qs.value[0].agreementList,(()=>{Hs.value=0,Qs.value.map(s=>{s.isApply||Hs.value++});let s=Qs.value.findIndex(s=>!s.isApply);console.log(s),-1!==s&&(Qs.value[s].selected=!0)})(),qs(),J.set("userId",Qs.value[0].userId,{expires:1}),0===Hs.value&&bs.push({path:"/goods1"})):Js()}else Js()})();const Ks=t({all:0,size:0});(()=>{let s=(new Date).getHours();Ks.size=20+11*s+1,Ks.all=30+13*s+1})();const Bs=o(!1);var Vs;return Vs=navigator.userAgent,Bs.value=!!Vs.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),(e,a)=>{const l=I,o=E,t=s;return c((d(),r("article",{class:b(["api-page",{ios:i(Bs)}])},[i(ys)?A("",!0):(d(),r(n,{key:0},[a[22]||(a[22]=u("div",{class:"banner"},null,-1)),u("section",F,[a[12]||(a[12]=m('<header class="money-banner-header" data-v-248b9f2e><div class="logo" data-v-248b9f2e></div><div class="logo-text" data-v-248b9f2e>优贷通</div><div class="info" data-v-248b9f2e>放款速度快</div><div class="info" data-v-248b9f2e>审批效率高</div></header><div class="your-money" data-v-248b9f2e>您的预审金额</div>',2)),u("div",H,v(i(Qs)[0].applyAmount),1),u("div",K,"总预审额度"+v(2*i(Qs)[0].applyAmount),1)]),u("p",B,[p("今日申请人数："+v(i(Ks).all)+"人",1),u("em",V,"成功"+v(i(Ks).size)+"人",1)]),u("section",{class:"goods-list-main",ref_key:"goodsBox",ref:As},[a[19]||(a[19]=u("header",{class:"goods-header"},"选择服务提供方",-1)),(d(!0),r(n,null,g(i(Qs),(s,e)=>(d(),r("section",{key:s.platformId,class:b(["goods-list-box",{cur:s.selected,used:s.isApply}]),onClick:s=>(s=>{if(Qs.value[s].isApply)return Qs.value[s].selected=!1,void T({message:"该机构已经申请",duration:1e3});Qs.value[s].selected?Qs.value[s].selected=!1:Qs.value[s].selected=!0,qs()})(e)},[u("h3",P,[u("img",{class:"logo",src:"https://paiyidai.hnyiye.com"+s.logoUrl,onError:a[0]||(a[0]=(...s)=>i(q)&&i(q)(...s)),alt:""},null,40,Z),p(" "+v(s.firmName),1)]),u("div",D,[u("dl",null,[u("dt",N,[p(v(s.lowRate),1),a[13]||(a[13]=u("em",{class:"small"},"%",-1))]),a[14]||(a[14]=u("dd",{class:"gray"},"最低月利率",-1))]),u("dl",null,[u("dt",O,[p(v(s.highLimit),1),a[15]||(a[15]=u("em",{class:"small"},"万",-1))]),a[16]||(a[16]=u("dd",{class:"gray"},"最高额度",-1))]),u("dl",null,[u("dt",W,[p(v(s.longTerm),1),a[17]||(a[17]=u("em",{class:"small"},"个月",-1))]),a[18]||(a[18]=u("dd",{class:"gray"},"最长期限",-1))])])],10,L))),128))],512),a[23]||(a[23]=u("section",{class:"remind-floor"},[u("h3",{class:"remind-title"},[u("img",{class:"img",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAABA5JREFUWEfFV01oXFUU/s6bNw2SCtNCS2YwgmJXQrHizzQGXLgRu9BVFoIgyfDuJKMVx1IrKJlQIfUnEaOT3PuSEETczEoXFZe6aJuKpgpuSqGC07yRiuksHIXJmznOHe6UIZnfZ4J39ebee8757rnn+84dQsDBzOS67lVt7jjOk0TEQVxRECNts7a2FimXy3f0d6VSOTw1NVX/7ncEBrC4uHgoFApt/W8ApqenD8RisdsagOd5R2dmZsr9nl7v35UB13UfsSxrKJFIfNPNoVLqfr1HCPFbt71Symcty/rdcZyfmvfuAqCU0s6GAbwlhLjQzXEv60qpcwBmAeSFEHXQjbELgJTyPBG9XU8P0aTjOLLZIJPJWENDQ7rqRwBETfUXAKx7nreeyWSqzfuVUgkAy8bfu47jvNMRgF5USr0H4CyAz4QQL+s5fefRaFRYlnWOmWNtTq6BXPA8TzZqQin1IYA3ALwvhHhzp11bFqysrJyoVCrXhRB/Z7PZYdu2vwTwqHFQYubviOhX/ZuZHyCipwEMmvVr4XD4+fHx8XwulwttbW09mEwmb7QC3ZWGJvg6AH1qzfXzpVJJptPpf5odzs/P3zM4OJisyYJO8SEi8mzbjmsQneqkIwBDtSvm5DeY+VS7kzSCSCmPEdFFAMcAXPM8L96Joh0BSClfJaIFAEVmfqJb8B0gvgcQqWXtNSGE9tFytAWgqz0Wi+VNwaWFEB/1QrnGHqXU6wDmazJRKBQK9+1kx10aKqUEgGcMTbxIJHJ2bGysLKU8SUSXAZRKpdKRnXfeDYypiT90YVar1dHJyclLuVzuQLFYnGVmrTOa5t+SUupPAIcbDpn58WQy+YPrumlmnqul/utkMnmqW8BW61LKi0T0HIAzQog5w6yNu6cnKtLS0tJTRDRqWZae9xzH+dxoQYO/WSHEK0EAKKU+BZACMCeEOGP8vkhEw9VqXa+utK0B13U/YGZttKcAehai/biCvoTIdd0RZr60F0Vo2/bIxMSE1pNdoyMNo9HoLd1wAOwfDTsVl1LqdE1WP/4vQkREpx3H+aRvIdIGRop1HzgBIIgUb3iedzKwFGsQuhmFw+F1o4h9NaPt7e14KpUK3owaaTMd8SuTCT3drR1v+L7/QrfgdTXsVWDMdeh2q59XujBbjQIRzW5ubqpeH6k9A2hEM00qDiDe9DIq2LZ9OZ/PX23XdAIVYSsjpdRouwzYtn2rHd/3BMDy8vLxarX6c4dr41AodDyRSPzS69X2dQWrq6v3+r7/RbtHKRHlfd9/KZVK/bUvAJqdZrPZg0R0VM8x8+1+gjb76SsDTbQ8GA6HbzLzETN3JxQKPZRIJOr/FfsZgQAsLCwMDAwM/AjgYRPsuu/7jwXJwr8ajOsrDCaxbQAAAABJRU5ErkJggg==",alt:""}),p("特别提醒")]),u("p",{class:"test"},"所有贷款申请在未成功贷款前绝不收取任何费用，为了保障您的资金安全，请不要相信任何要求您支付费用的信息、邮件、电话等不实信息。")],-1)),u("section",M,[f(z)]),u("footer",Y,[u("div",{class:"footer-btn",onClick:js},"同意并领取额度"),u("div",G,[u("div",{class:b(["checked",{cur:i(Is)}]),onClick:Es},null,2),u("div",_,[a[20]||(a[20]=p(" 我已阅读并同意以下协议： ",-1)),u("span",{class:"books",onClick:a[1]||(a[1]=s=>ws(1))},"《隐私政策》"),u("span",{class:"books",onClick:a[2]||(a[2]=s=>ws(2))},"《个人信息处理规则（含信息授权协议）》"),u("span",{class:"books",onClick:a[3]||(a[3]=s=>ws(3))},"《用户注册服务协议》"),u("span",{class:"books",onClick:a[4]||(a[4]=s=>ws(4))},"《产品风险告知书》"),(d(!0),r(n,null,g(i(Fs),(s,e)=>(d(),r("span",{class:"books",key:e},[u("a",{href:s.agreementUrl,target:"_blank",class:"books"},"《"+v(s.agreementName)+"》",9,$)]))),128)),a[21]||(a[21]=p(" 并授权相应机构为我提供咨询服务。 ",-1))])])])],64)),c(u("div",ss,null,512),[[y,i(Cs)]]),f(l,{show:i(Cs),"onUpdate:show":a[10]||(a[10]=s=>k(Cs)?Cs.value=s:null),position:"bottom"},{default:h(()=>[u("section",es,[u("header",as,[a[25]||(a[25]=u("h3",{class:"title"},"您还可以申请以下平台",-1)),u("p",ls,[a[24]||(a[24]=p("你已申请以下平台，",-1)),u("em",os,"当前已申请"+v(i(Rs))+"家机构",1)])]),u("section",ts,[u("header",{class:b(["check-all",{cur:i(zs)}]),onClick:Ss},[...a[26]||(a[26]=[u("div",{class:"icon"},null,-1),p("全部选择 ",-1)])],2),(d(!0),r(n,null,g(i(Ts),(s,e)=>(d(),r("section",{key:s.platformId,class:b(["goods-list-box",{cur:s.selected}]),onClick:s=>(s=>{Ts.value[s].selected?Ts.value[s].selected=!1:Ts.value[s].selected=!0,Rs.value=Ts.value.filter(s=>s.selected).length})(e)},[u("h3",is,[u("img",{class:"logo",src:"https://paiyidai.hnyiye.com"+s.logoUrl,onError:a[5]||(a[5]=(...s)=>i(q)&&i(q)(...s)),alt:""},null,40,ds),p(" "+v(s.firmName),1)]),u("div",rs,[u("dl",null,[u("dt",ns,[p(v(s.lowRate),1),a[27]||(a[27]=u("em",{class:"small"},"%",-1))]),a[28]||(a[28]=u("dd",{class:"gray"},"最低月利率",-1))]),u("dl",null,[u("dt",us,[p(v(s.highLimit),1),a[29]||(a[29]=u("em",{class:"small"},"万",-1))]),a[30]||(a[30]=u("dd",{class:"gray"},"最高额度",-1))]),u("dl",null,[u("dt",ms,[p(v(s.longTerm),1),a[31]||(a[31]=u("em",{class:"small"},"个月",-1))]),a[32]||(a[32]=u("dd",{class:"gray"},"最长期限",-1))])])],10,cs))),128))]),a[35]||(a[35]=u("p",{class:"remind"},"温馨提醒：申请多家平台，可以提高您申领成",-1)),u("div",vs,[u("div",{class:b(["checked",{cur:i(Is)}]),onClick:Es},null,2),u("div",ps,[a[33]||(a[33]=p(" 我已阅读并同意以下协议： ",-1)),u("span",{class:"books",onClick:a[6]||(a[6]=s=>ws(1))},"《隐私政策》"),u("span",{class:"books",onClick:a[7]||(a[7]=s=>ws(2))},"《个人信息处理规则（含信息授权协议）》"),u("span",{class:"books",onClick:a[8]||(a[8]=s=>ws(3))},"《用户注册服务协议》"),u("span",{class:"books",onClick:a[9]||(a[9]=s=>ws(4))},"《产品风险告知书》"),a[34]||(a[34]=p(" 并授权相应机构为我提供咨询服务。 ",-1))])]),u("div",{class:"submit-btn",onClick:xs},"同意"),u("div",{class:"submit-btn close",onClick:Us},"退出")])]),_:1},8,["show"]),f(o,{show:i(hs),"onUpdate:show":a[11]||(a[11]=s=>k(hs)?hs.value=s:null)},{default:h(()=>[u("div",gs,[1==i(ks)?(d(),R(S,{key:0})):A("",!0),2==i(ks)?(d(),R(j,{key:1})):A("",!0),3==i(ks)?(d(),R(x,{key:2})):A("",!0),4==i(ks)?(d(),R(U,{key:3})):A("",!0)])]),_:1},8,["show"])],2)),[[t,i(ys)]])}}}),[["__scopeId","data-v-248b9f2e"]]);export{fs as default};
