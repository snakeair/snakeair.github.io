import{_ as e,d as s,u as a,n as t,q as i,r as l,a as o,o as r,c,e as d,w as n,f as p,v as m,g as u,t as f,h as v,l as g}from"../default/default-6a25d783.js";import{_ as h}from"./img-06-c327b133.js";import{_ as b,a as y}from"./img-088-e6f31b4d.js";import{p as x}from"./util-99024f14.js";import{$ as k,a as w,b as _,c as q}from"./js.cookie-86e032fa.js";import{i as j}from"./index-1c11bd12.js";const C={class:"reg-pages"},I={class:"z10"},O=g('<h1 class="title" data-v-37dfd6fc><img class="logo" src="'+h+'" alt="" data-v-37dfd6fc></h1><div class="banner" data-v-37dfd6fc><h3 class="money" data-v-37dfd6fc><em class="icon" data-v-37dfd6fc>￥</em>200,000</h3><p class="info" data-v-37dfd6fc>年化利率7.2%-24% <em data-v-37dfd6fc>/</em> 循环额度 <em data-v-37dfd6fc>/</em> 次日可还</p></div>',2),V={class:"form-box"},D={class:"form-list"},T={class:"form-list form-code"},A={class:"wait-code"},M={class:"pact"},S={class:"img",src:b,alt:""},U={class:"img",src:y,alt:""};var $=e(s({__name:"index",setup(e){const s=a(),g=t(),h=j();i((()=>{var e=navigator.userAgent.toLowerCase(),s=-1!=e.indexOf("iphone")||-1!=e.indexOf("ipad");if(e.indexOf("mqqbrowser")>-1&&e.indexOf(" qq")<0||s){var a=document.querySelector("#file");a&&a.removeAttribute("capture")}}));const b=l({msg:"",type:!1}),y=l({code:"",mobile:""}),$=l({timer:60,show:!0});let z="请输入正确的手机号码";const E=()=>{if(!x(y.mobile))return b.type=!0,b.msg=z,!1;b.type=!1;let e=`/api.php/core/tool/getcode?client=h5&package=pc&ver=v1.1&Mobile=${y.mobile}&type=3`;k(e,{}).then((e=>{$.show=!1,setInterval((()=>{1===$.timer?($.timer=60,$.show=!0):$.timer--}),1e3)}))},L=o({Time:"",Val:"",ID:""}),R=()=>{k("/api.php/core/tool/timestamp?client=pc&package=h5&ver=v1.1",{}).then((e=>{1==e.result&&(L.value=e.data,B())}))},B=()=>{let e={ticksid:L.value.ID,client:"h5",package:"pc",ver:"v1.1",ticks:L.value.Val,mobile:y.mobile,code:y.code,loginType:1};k("/api.php/center/member/login",e).then((e=>{1==e.result?(_.set("token",e.data.Token,{expires:.04}),_.set("id",e.data.ID,{expires:.04}),_.set("info",e.data.is_info,{expires:.04}),H(),g.push({path:"/address"})):q({type:"error",msg:e.message})}))},F=o(!1),G=()=>{F.value=!F.value};(()=>{let e=s.query.source,a={puser:e||h.puser};w("/api.php/center/register/channel",a).then((e=>{}))})();const H=()=>{_.get("token")&&g.push({path:"/"})};return H(),(e,a)=>(r(),c("div",null,[d("div",C,[d("div",I,[O,d("div",V,[d("form",{name:"login",id:"login-form",onSubmit:a[3]||(a[3]=n((()=>{}),["prevent"]))},[d("div",D,[p(d("input",{class:"input",type:"text",maxlength:"11","onUpdate:modelValue":a[0]||(a[0]=e=>y.mobile=e),placeholder:"请输入您的联系电话"},null,512),[[m,y.mobile]])]),d("div",T,[p(d("input",{class:"input code",type:"text",maxlength:"11","onUpdate:modelValue":a[1]||(a[1]=e=>y.code=e),placeholder:"请输入短信验证码"},null,512),[[m,y.code]]),p(d("div",{btn:"",class:"get-code-btn",onClick:E},"获取验证码",512),[[u,$.show]]),p(d("div",A,[d("em",null,f($.timer)+"s",1),v(" 后重新获取")],512),[[u,!$.show]]),p(d("p",{class:"error"},f(b.msg),513),[[u,b.type]])]),d("button",{class:"form-btn",type:"submit",onClick:a[2]||(a[2]=e=>(()=>{if(!x(y.mobile))return b.type=!0,b.msg=z,!1;if(b.type=!1,!F.value)return b.type=!0,b.msg="请同意注册协议",!1;b.type=!1;let e=s.query.source,a={Mobile:y.mobile,Code:y.code,puser:e||h.puser,client:"pc"};w("/api.php/center/Register/reg",a).then((e=>{1===e.result||3===e.result?R():(b.type=!0,b.msg=e.message)}))})())},"登录")],32),d("div",M,[d("span",{class:"checkbox",onClick:G},[p(d("img",S,null,512),[[u,!F.value]]),p(d("img",U,null,512),[[u,F.value]])])])])])])]))}}),[["__scopeId","data-v-37dfd6fc"],["__file","E:/other/vue/vitets/src/views/login/index.vue"]]);export{$ as default};
