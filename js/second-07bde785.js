import{J as e,d as a,K as l,L as o,h as s,M as n,N as t,O as r,Q as i,R as d,a as u,u as c,b as m,r as p,e as h,f,g as v,w as b,E as g,P as y,D as w,F as V,y as j,S as k,T as _,s as x,x as S,j as U,A as B,B as E,n as z,$ as C,G as I,C as N,U as T,V as A,W as P,_ as q}from"../default/default-0acc75c5.js";import{i as F,a as M,p as G}from"./index.esm-c8c4a52d.js";import{s as O,R as L,a as R,A as W}from"./index-5df0916d.js";/* empty css              *//* empty css              */import{i as $}from"./isLogin-acb36c9b.js";import"./mount-component-e7c80737.js";const[D,J]=e("form");const K=d(a({name:D,props:{colon:Boolean,disabled:Boolean,readonly:Boolean,showError:Boolean,labelWidth:n,labelAlign:String,inputAlign:String,scrollToError:Boolean,validateFirst:Boolean,submitOnEnter:t,showErrorMessage:t,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}},emits:["submit","failed"],setup(e,{emit:a,slots:n}){const{children:t,linkChildren:d}=l(r),u=e=>e?t.filter((a=>e.includes(a.name))):t,c=a=>{return"string"==typeof a?(e=>{const a=t.find((a=>a.name===e));return a?new Promise(((e,l)=>{a.validate().then((a=>{a?l(a):e()}))})):Promise.reject()})(a):e.validateFirst?(l=a,new Promise(((e,a)=>{const o=[];u(l).reduce(((e,a)=>e.then((()=>{if(!o.length)return a.validate().then((e=>{e&&o.push(e)}))}))),Promise.resolve()).then((()=>{o.length?a(o):e()}))}))):(e=>new Promise(((a,l)=>{const o=u(e);Promise.all(o.map((e=>e.validate()))).then((e=>{(e=e.filter(Boolean)).length?l(e):a()}))})))(a);var l},m=(e,a)=>{t.some((l=>l.name===e&&(l.$el.scrollIntoView(a),!0)))},p=()=>t.reduce(((e,a)=>(void 0!==a.name&&(e[a.name]=a.formValue.value),e)),{}),h=()=>{const l=p();c().then((()=>a("submit",l))).catch((o=>{a("failed",{values:l,errors:o}),e.scrollToError&&o[0].name&&m(o[0].name)}))},f=e=>{i(e),h()};return d({props:e}),o({submit:h,validate:c,getValues:p,scrollToField:m,resetValidation:e=>{"string"==typeof e&&(e=[e]);u(e).forEach((e=>{e.resetValidation()}))},getValidationStatus:()=>t.reduce(((e,a)=>(e[a.name]=a.getValidationStatus(),e)),{})}),()=>{var e;return s("form",{class:J(),onSubmit:f},[null==(e=n.default)?void 0:e.call(n)])}}})),Q={zhima:{data:[{label:"无",value:0},{label:"600分以下",value:1},{label:"600-650分",value:2},{label:"650-700分",value:3},{label:"700分以上",value:4}],error:"请选择芝麻分数",name:"芝麻分数",type:"radio"},jdbaitiao:{data:[{label:"无京东白条",value:0},{label:"5000以下",value:1},{label:"5000以上",value:2}],error:"请选择京东白条",name:"京东白条",type:"radio"},huabei:{data:[{label:"无支付宝花呗",value:0},{label:"5000以下",value:1},{label:"5000以上",value:2}],error:"请选择花呗白条",name:"支付宝花呗",type:"radio"},zichan:{data:[{label:"是企业主",value:"job"},{label:"有公积金",value:"gongjijin"},{label:"有房",value:"house"},{label:"有车",value:"vehicle"},{label:"有社保",value:"shebao"},{label:"有保单",value:"insurance"},{label:"有逾期",value:"overdue"}],error:"请选择个人资产",name:"个人资产(多选)",type:"checkboxGroup"}},H={class:"aptitude-page"},X={class:"header-form"},Y={class:"form-main"},Z={style:{margin:"20px 20px 0 20px"}},ee={class:"footer"},ae={class:"check-box"},le=(e=>(B("data-v-589cf350"),e=e(),E(),e))((()=>v("p",{class:"info"},"国家级数据加密，仅用于贷款审核",-1))),oe={class:"iframe-show"},se=q(a({__name:"second",setup(e){const a=F();$();const l=u(),o=c(),n=m({form:{cnName:"",idNumber:""},address:"",zichan:[],checked:!1,addrShow:!1}),t=p(!1),r=()=>{n.checked=!n.checked},i=({selectedOptions:e})=>{n.addrShow=!1,n.address=e.map((e=>e.text)).join("/")},d=()=>{let e=setInterval((function(){document.documentElement.scrollTop-=10,document.documentElement.scrollTop<=0&&clearInterval(e)}),5)},B=async()=>{if(!n.checked)return O("请阅读并同意用户条款"),!1;if(""==n.form.cnName||""==n.form.idNumber)return O("请填写完善您的个人信息"),d(),!1;if(""==n.address)return O("请选择您的地址"),d(),!1;let e=o.query.channel;console.log(n.address);let s={job:0,gongjijin:0,house:0,vehicle:0,shebao:0,insurance:0,overdue:3},t={job:1,gongjijin:2,house:3,vehicle:3,shebao:2,insurance:2,overdue:0},[r,i,u]=n.address.split("/");for(let a in t)n.zichan.includes(a)&&(s[a]=t[a]);console.log(s);let c={...n.form,...s,province:r,city:i,area:u,channel:e||a.channel,id:z.get("userId")};if(1==(await C("/api/user/updateUserInfo",c)).status){let e="/api/user/match/getAllMatching",a={appType:3,type:7,userId:z.get("userId")},o=await C(e,a);if(console.log(o),o.data&&o.data.length>0)return void l.push({path:"result",query:{ids:o.data[0].conditionId}});l.push({path:"/goods"})}l.push({path:"/goods"})},E=()=>{document.activeElement.blur()};return(e,a)=>{const l=I,o=N,d=K,u=L,c=R,m=T,p=A,z=P,C=g,q=W,F=y,O=w;return h(),f("article",H,[v("header",X,[s(d,{"input-align":"right"},{default:b((()=>[s(o,{inset:""},{default:b((()=>[s(l,{name:"姓名",label:"姓名",placeholder:"姓名","model-value":n.form.cnName,"onUpdate:modelValue":a[0]||(a[0]=e=>n.form.cnName=e),rules:[{required:!0,message:"请填写姓名"}]},null,8,["model-value"]),s(l,{name:"身份证号码",label:"身份证号码",placeholder:"身份证号码","model-value":n.form.idNumber,"onUpdate:modelValue":a[1]||(a[1]=e=>n.form.idNumber=e),rules:[{required:!0,message:"请填写身份证号码"}]},null,8,["model-value"])])),_:1})])),_:1})]),v("section",Y,[s(d,{"label-align":"top","input-align":"center"},{default:b((()=>[s(o,{inset:"",class:"addr-box"},{default:b((()=>[s(l,{"label-align":"left","input-align":"right",modelValue:n.address,"onUpdate:modelValue":a[2]||(a[2]=e=>n.address=e),"is-link":"",name:"area",label:"地区选择",placeholder:"点击选择省市区",onClick:a[3]||(a[3]=e=>n.addrShow=!0),onFocus:E},null,8,["modelValue"]),(h(!0),f(V,null,j(U(Q),((e,o)=>(h(),k(l,{name:e.type,label:e.name,"input-align":"center"},_({_:2},["radio"==e.type?{name:"input",fn:b((()=>[s(c,{class:"radio-box",modelValue:n.form[o],"onUpdate:modelValue":e=>n.form[o]=e,direction:"horizontal"},{default:b((()=>[(h(!0),f(V,null,j(e.data,(e=>(h(),k(u,{name:e.value},{default:b((()=>[x(S(e.label),1)])),_:2},1032,["name"])))),256))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),key:"0"}:void 0,"checkboxGroup"==e.type?{name:"input",fn:b((()=>[s(p,{class:"radio-box",modelValue:n.zichan,"onUpdate:modelValue":a[4]||(a[4]=e=>n.zichan=e),direction:"horizontal"},{default:b((()=>[(h(!0),f(V,null,j(e.data,(e=>(h(),k(m,{name:e.value,shape:"square"},{default:b((()=>[x(S(e.label),1)])),_:2},1032,["name"])))),256))])),_:2},1032,["modelValue"])])),key:"1"}:void 0]),1032,["name","label"])))),256))])),_:1}),v("div",Z,[s(z,{round:"",block:"",type:"primary",class:"form-btn",onClick:B},{default:b((()=>[x(" 提交 ")])),_:1})])])),_:1}),v("footer",ee,[v("div",ae,[s(C,{class:"checked",modelValue:n.checked,"onUpdate:modelValue":a[5]||(a[5]=e=>n.checked=e),size:"large"},null,8,["modelValue"]),v("span",{onClick:r},"我已阅读同意"),v("span",{class:"pact",onClick:a[6]||(a[6]=e=>{t.value=!0})},"《贷款知情确认书》")]),le])]),s(F,{show:n.addrShow,"onUpdate:show":a[8]||(a[8]=e=>n.addrShow=e),position:"bottom"},{default:b((()=>[s(q,{"area-list":U(M),onConfirm:i,onCancel:a[7]||(a[7]=e=>n.addrShow=!1)},null,8,["area-list"])])),_:1},8,["show"]),s(O,{show:t.value,"onUpdate:show":a[9]||(a[9]=e=>t.value=e),title:"",showCancelButton:!1},{default:b((()=>[v("div",oe,[s(G)])])),_:1},8,["show"])])}}}),[["__scopeId","data-v-589cf350"]]);export{se as default};
