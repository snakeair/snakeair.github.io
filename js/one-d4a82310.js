import{_ as a,d as e,i as s,k as t,r as l,c as n,a as c,n as o,f as i,b as u,w as r,m as p,q as d,G as m,$ as f,o as g,p as v,g as b}from"../default/default-f0912ddd.js";import{$ as y}from"./upload-c1e8d1e9.js";const _=a=>(v("data-v-59882952"),a=a(),b(),a),k={class:"common-pages que-one"},w=_((()=>c("h3",{class:"page-title"},"第一题",-1))),z=["innerHTML"],h={class:"img-box"},q=["src"],L={key:1,src:"./assets/img-26-f7b5c552.png",class:"img-default",alt:""},j={class:"reply-box"},x={class:"pic common-btn"},C={class:"pic common-btn"},F={class:"cloud"},I={class:"layer layer-up"},$=_((()=>c("div",{class:"iconfont icon-dui3"},null,-1))),D=_((()=>c("p",{class:"info"},"上传成功",-1)));var H=a(e({__name:"one",setup(a){const{isLoginFn:e}=s();e();const v=t(""),b=t("");let _=0,H=null;(async()=>{let a=await m("/api.php/puzzle/subject",{});b.value=a.data.title,H=setInterval((function(){_++}),1e3)})();let M=new FormData;const R=async()=>{if(!M.get("file"))return!1;clearInterval(H),H=null,M.set("use_seconds",`${_}`),M.set("puzzle_id","1");let a=await y("/api.php/puzzle/first",M);0==a.code?v.value="up":f({type:"error",msg:a.message})};let T=t("");const A=a=>{const e=a.target.files[0],s=new FileReader;s.onload=function(a){T.value=a.target.result},s.readAsDataURL(e),M.set("file",e)};return(a,e)=>{const s=l("router-link");return g(),n("div",k,[w,c("p",{class:"page-take",innerHTML:o(b)},null,8,z),c("div",h,[""!=o(T)?(g(),n("img",{key:0,src:o(T),class:"img",alt:""},null,8,q)):(g(),n("img",L))]),c("div",j,[c("label",x,[c("input",{type:"file",onChange:A,accept:"image/*",capture:"camera"},null,32),i("立即拍照 ")]),c("label",C,[c("input",{type:"file",onChange:A,accept:"image/*;"},null,32),i("从照片库中选择 ")]),c("div",{class:"up-btn common-btn",onClick:R,btn:""},"立即提交")]),u(s,{class:"to-rank",to:"/question/rank"},{default:r((()=>[i("查看入围选手名单")])),_:1}),p(c("div",F,null,512),[[d,""!==o(v)]]),p(c("div",I,[$,D,u(s,{to:"/question/two",class:"close-btn common-btn",btn:""},{default:r((()=>[i("下一题")])),_:1})],512),[[d,"up"==o(v)]])])}}}),[["__scopeId","data-v-59882952"],["__file","E:/coding/work/newyear/src/views/question/one.vue"]]);export{H as default};
