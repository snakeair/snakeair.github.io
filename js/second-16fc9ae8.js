import{b as e,$ as a}from"./axios-6a4eca55.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import{a as l}from"./index.esm-18931819.js";import{A as o}from"./index-f28e9596.js";import"./base-af380e57.js";import{E as r}from"./el-checkbox-d7dd3ce9.js";/* empty css              *//* empty css              */import{R as s,a as t}from"./index-ada3d9f2.js";import{p as n,b as i}from"./personalpact-ccb247f9.js";import{a as d}from"./js.cookie-d59fc71c.js";import{i as u}from"./index-d42c0720.js";import{i as m}from"./isLogin-3adfd9a2.js";import{K as c,d as p,M as h,N as f,j as b,O as v,Q as g,R as j,S as x,T as y,A as k,r as w,b as V,e as S,f as _,m as z,p as B,q as E,P as U,D as C,F as I,s as N,z as T,U as P,g as q,t as A,u as F,H as M,B as G,C as L,V as O,W as D,x as H}from"../default/default-0c4e0e14.js";import{s as K}from"./function-call-1ca45ddf.js";import"./block-a36b9c86.js";import"./mount-component-dce9f19a.js";const[R,W]=c("form");const $=y(p({name:R,props:{colon:Boolean,disabled:Boolean,readonly:Boolean,required:[Boolean,String],showError:Boolean,labelWidth:v,labelAlign:String,inputAlign:String,scrollToError:Boolean,scrollToErrorPosition:String,validateFirst:Boolean,submitOnEnter:g,showErrorMessage:g,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}},emits:["submit","failed"],setup(e,{emit:a,slots:l}){const{children:o,linkChildren:r}=h(j),s=e=>e?o.filter(a=>e.includes(a.name)):o,t=a=>{return"string"==typeof a?(e=>{const a=o.find(a=>a.name===e);return a?new Promise((e,l)=>{a.validate().then(a=>{a?l(a):e()})}):Promise.reject()})(a):e.validateFirst?(l=a,new Promise((e,a)=>{const o=[];s(l).reduce((e,a)=>e.then(()=>{if(!o.length)return a.validate().then(e=>{e&&o.push(e)})}),Promise.resolve()).then(()=>{o.length?a(o):e()})})):(e=>new Promise((a,l)=>{const o=s(e);Promise.all(o.map(e=>e.validate())).then(e=>{(e=e.filter(Boolean)).length?l(e):a()})}))(a);var l},n=(e,a)=>{o.some(l=>l.name===e&&(l.$el.scrollIntoView(a),!0))},i=()=>o.reduce((e,a)=>(void 0!==a.name&&(e[a.name]=a.formValue.value),e),{}),d=()=>{const l=i();t().then(()=>a("submit",l)).catch(o=>{a("failed",{values:l,errors:o});const{scrollToError:r,scrollToErrorPosition:s}=e;r&&o[0].name&&n(o[0].name,s?{block:s}:void 0)})},u=e=>{x(e),d()};return r({props:e}),f({submit:d,validate:t,getValues:i,scrollToField:n,resetValidation:e=>{"string"==typeof e&&(e=[e]);s(e).forEach(e=>{e.resetValidation()})},getValidationStatus:()=>o.reduce((e,a)=>(e[a.name]=a.getValidationStatus(),e),{})}),()=>{var e;return b("form",{class:W(),onSubmit:u},[null==(e=l.default)?void 0:e.call(l)])}}})),J={zhima:{data:[{label:"无",value:0},{label:"600分以下",value:1},{label:"600-650分",value:2},{label:"650-700分",value:3},{label:"700分以上",value:4}],error:"请选择芝麻分数",name:"芝麻分数",type:"radio"},jdbaitiao:{data:[{label:"无京东白条",value:0},{label:"5000以下",value:1},{label:"5000以上",value:2}],error:"请选择京东白条",name:"京东白条",type:"radio"},huabei:{data:[{label:"无支付宝花呗",value:0},{label:"5000以下",value:1},{label:"5000以上",value:2}],error:"请选择花呗白条",name:"支付宝花呗",type:"radio"},zichan:{data:[{label:"是企业主",value:"job"},{label:"有公积金",value:"gongjijin"},{label:"有房",value:"house"},{label:"有车",value:"vehicle"},{label:"有社保",value:"shebao"},{label:"有保单",value:"insurance"},{label:"有逾期",value:"overdue"}],error:"请选择个人资产",name:"个人资产(多选)",type:"checkboxGroup"}},Q={class:"aptitude-page"},X={class:"header-form"},Y={class:"form-main"},Z={style:{margin:"20px 20px 0 20px"}},ee={class:"footer"},ae={class:"check-box"},le={class:"iframe-show"},oe=H(p({__name:"second",setup(c){const p=u(),{isLoginFn:h}=m();h();const f=B(),v=E(),g=k({form:{cnName:"",idNumber:"",zhima:"",huabei:"",jdbaitiao:""},address:"",zichan:[],checked:!1,addrShow:!1}),j=w(!1),x=()=>{g.checked=!g.checked},y=({selectedOptions:e})=>{g.addrShow=!1,g.address=e.map(e=>e.text).join("/")},H=()=>{let e=setInterval(function(){document.documentElement.scrollTop-=10,document.documentElement.scrollTop<=0&&clearInterval(e)},5)},R=async()=>{if(!g.checked)return K("请阅读并同意用户条款"),!1;if(""==g.form.cnName||""==g.form.idNumber)return K("请填写完善您的个人信息"),H(),!1;if(""==g.address)return K("请选择您的地址"),H(),!1;if(console.log(g.form.jdbaitiao),""===g.form.jdbaitiao)return K("请选择京东白条"),!1;if(""===g.form.zhima)return K("请选择芝麻分数"),!1;if(""===g.form.huabei)return K("请选择花呗白条"),!1;let l=v.query.channel;console.log(g.address);let o={job:0,gongjijin:0,house:0,vehicle:0,shebao:0,insurance:0,overdue:3},r={job:1,gongjijin:2,house:3,vehicle:3,shebao:2,insurance:2,overdue:0},[s,t,n]=g.address.split("/");for(let e in r)g.zichan.includes(e)&&(o[e]=r[e]);let i={...g.form,...o,province:s,city:t,area:n,channel:l||p.channel,id:d.get("userId")};if(1==(await e("/api/user/updateUserInfoNew",i)).status){let e="/api/user/match/getAllMatching",l={appType:3,type:7,userId:d.get("userId")},o=await a(e,l);if(console.log(o),o.data&&o.data.length>0)return void f.push({path:"/result",query:{ids:o.data[0].conditionId}});f.push({path:"/goods"})}f.push({path:"/goods"})};return(e,a)=>{const d=M,u=G,m=$,c=s,p=t,h=L,f=O,v=D,k=r,w=o,B=U,E=C;return V(),S("article",Q,[_("header",X,[b(m,{"input-align":"right"},{default:z(()=>[b(u,{inset:""},{default:z(()=>[b(d,{name:"姓名",label:"姓名",placeholder:"姓名","model-value":g.form.cnName,"onUpdate:modelValue":a[0]||(a[0]=e=>g.form.cnName=e),rules:[{required:!0,message:"请填写姓名"}]},null,8,["model-value"]),b(d,{name:"身份证号码",label:"身份证号码",placeholder:"身份证号码","model-value":g.form.idNumber,"onUpdate:modelValue":a[1]||(a[1]=e=>g.form.idNumber=e),rules:[{required:!0,message:"请填写身份证号码"}]},null,8,["model-value"])]),_:1})]),_:1})]),_("section",Y,[b(m,{"label-align":"top","input-align":"center"},{default:z(()=>[b(u,{inset:"",class:"addr-box"},{default:z(()=>[b(d,{"label-align":"left","input-align":"right",modelValue:g.address,"onUpdate:modelValue":a[2]||(a[2]=e=>g.address=e),"is-link":"",name:"area",label:"地区选择",placeholder:"点击选择省市区",onClick:a[3]||(a[3]=e=>g.addrShow=!0),disabled:!0},null,8,["modelValue"]),(V(!0),S(I,null,N(F(J),(e,l)=>(V(),T(d,{name:e.type,label:e.name,"input-align":"center"},P({_:2},["radio"==e.type?{name:"input",fn:z(()=>[b(p,{class:"radio-box",modelValue:g.form[l],"onUpdate:modelValue":e=>g.form[l]=e,direction:"horizontal"},{default:z(()=>[(V(!0),S(I,null,N(e.data,e=>(V(),T(c,{name:e.value},{default:z(()=>[q(A(e.label),1)]),_:2},1032,["name"]))),256))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),key:"0"}:void 0,"checkboxGroup"==e.type?{name:"input",fn:z(()=>[b(f,{class:"radio-box",modelValue:g.zichan,"onUpdate:modelValue":a[4]||(a[4]=e=>g.zichan=e),direction:"horizontal"},{default:z(()=>[(V(!0),S(I,null,N(e.data,e=>(V(),T(h,{name:e.value,shape:"square"},{default:z(()=>[q(A(e.label),1)]),_:2},1032,["name"]))),256))]),_:2},1032,["modelValue"])]),key:"1"}:void 0]),1032,["name","label"]))),256))]),_:1}),_("div",Z,[b(v,{round:"",block:"",type:"primary",class:"form-btn",onClick:R},{default:z(()=>[...a[10]||(a[10]=[q(" 提交 ",-1)])]),_:1})])]),_:1}),_("footer",ee,[_("div",ae,[b(k,{class:"checked",modelValue:g.checked,"onUpdate:modelValue":a[5]||(a[5]=e=>g.checked=e),size:"large"},null,8,["modelValue"]),_("span",{onClick:x},"我已阅读同意"),_("span",{class:"pact",onClick:a[6]||(a[6]=e=>{j.value=!0})},"《贷款知情确认书》")]),a[11]||(a[11]=_("p",{class:"info"},"国家级数据加密，仅用于贷款审核",-1))])]),b(B,{show:g.addrShow,"onUpdate:show":a[8]||(a[8]=e=>g.addrShow=e),position:"bottom"},{default:z(()=>[b(w,{"area-list":F(l),onConfirm:y,onCancel:a[7]||(a[7]=e=>g.addrShow=!1)},null,8,["area-list"])]),_:1},8,["show"]),b(E,{show:j.value,"onUpdate:show":a[9]||(a[9]=e=>j.value=e),title:"",showCancelButton:!1},{default:z(()=>[_("div",le,[b(n)])]),_:1},8,["show"]),b(i)])}}}),[["__scopeId","data-v-9be5bc8a"]]);export{oe as default};
