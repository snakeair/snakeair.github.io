import{$ as e}from"./axios-61a900cc.js";/* empty css              *//* empty css              *//* empty css              */import{i as a,a as l,p as o}from"./index.esm-22a35fdd.js";import{R as s,a as n,A as t}from"./index-33f6a14e.js";import{E as r}from"./el-checkbox-c4a580f0.js";/* empty css              *//* empty css              */import{a as i}from"./js.cookie-8253c38e.js";import{i as d}from"./isLogin-973dae07.js";import{N as u,d as m,O as c,Q as p,a as h,R as f,S as b,T as v,U as g,V as j,u as y,j as V,C as k,r as w,o as x,c as _,f as S,A as U,P as I,D as z,H as B,I as C,W as E,X as N,l as T,x as A,g as P,p as q,b as F,K as M,F as O,Y as $,Z as G,$ as L,_ as R}from"../default/default-3c4439da.js";import{s as W}from"./function-call-5cefb36d.js";import"./mount-component-4ac2eb01.js";const[D,H]=u("form");const K=j(m({name:D,props:{colon:Boolean,disabled:Boolean,readonly:Boolean,showError:Boolean,labelWidth:f,labelAlign:String,inputAlign:String,scrollToError:Boolean,validateFirst:Boolean,submitOnEnter:b,showErrorMessage:b,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}},emits:["submit","failed"],setup(e,{emit:a,slots:l}){const{children:o,linkChildren:s}=c(v),n=e=>e?o.filter((a=>e.includes(a.name))):o,t=a=>{return"string"==typeof a?(e=>{const a=o.find((a=>a.name===e));return a?new Promise(((e,l)=>{a.validate().then((a=>{a?l(a):e()}))})):Promise.reject()})(a):e.validateFirst?(l=a,new Promise(((e,a)=>{const o=[];n(l).reduce(((e,a)=>e.then((()=>{if(!o.length)return a.validate().then((e=>{e&&o.push(e)}))}))),Promise.resolve()).then((()=>{o.length?a(o):e()}))}))):(e=>new Promise(((a,l)=>{const o=n(e);Promise.all(o.map((e=>e.validate()))).then((e=>{(e=e.filter(Boolean)).length?l(e):a()}))})))(a);var l},r=(e,a)=>{o.some((l=>l.name===e&&(l.$el.scrollIntoView(a),!0)))},i=()=>o.reduce(((e,a)=>(void 0!==a.name&&(e[a.name]=a.formValue.value),e)),{}),d=()=>{const l=i();t().then((()=>a("submit",l))).catch((o=>{a("failed",{values:l,errors:o}),e.scrollToError&&o[0].name&&r(o[0].name)}))},u=e=>{g(e),d()};return s({props:e}),p({submit:d,validate:t,getValues:i,scrollToField:r,resetValidation:e=>{"string"==typeof e&&(e=[e]);n(e).forEach((e=>{e.resetValidation()}))},getValidationStatus:()=>o.reduce(((e,a)=>(e[a.name]=a.getValidationStatus(),e)),{})}),()=>{var e;return h("form",{class:H(),onSubmit:u},[null==(e=l.default)?void 0:e.call(l)])}}})),Q={zhima:{data:[{label:"无",value:0},{label:"600分以下",value:1},{label:"600-650分",value:2},{label:"650-700分",value:3},{label:"700分以上",value:4}],error:"请选择芝麻分数",name:"芝麻分数",type:"radio"},jdbaitiao:{data:[{label:"无京东白条",value:0},{label:"5000以下",value:1},{label:"5000以上",value:2}],error:"请选择京东白条",name:"京东白条",type:"radio"},huabei:{data:[{label:"无支付宝花呗",value:0},{label:"5000以下",value:1},{label:"5000以上",value:2}],error:"请选择花呗白条",name:"支付宝花呗",type:"radio"},zichan:{data:[{label:"是企业主",value:"job"},{label:"有公积金",value:"gongjijin"},{label:"有房",value:"house"},{label:"有车",value:"vehicle"},{label:"有社保",value:"shebao"},{label:"有保单",value:"insurance"},{label:"有逾期",value:"overdue"}],error:"请选择个人资产",name:"个人资产(多选)",type:"checkboxGroup"}},X={class:"aptitude-page"},Y={class:"header-form"},Z={class:"form-main"},J={style:{margin:"20px 20px 0 20px"}},ee={class:"footer"},ae={class:"check-box"},le=(e=>(q("data-v-fb403e23"),e=e(),F(),e))((()=>S("p",{class:"info"},"国家级数据加密，仅用于贷款审核",-1))),oe={class:"iframe-show"},se=R(m({__name:"second",setup(u){const m=a(),{isLoginFn:c}=d();c();const p=y(),f=V(),b=k({form:{cnName:"",idNumber:""},address:"",zichan:[],checked:!1,addrShow:!1}),v=w(!1),g=()=>{b.checked=!b.checked},j=({selectedOptions:e})=>{b.addrShow=!1,b.address=e.map((e=>e.text)).join("/")},q=()=>{let e=setInterval((function(){document.documentElement.scrollTop-=10,document.documentElement.scrollTop<=0&&clearInterval(e)}),5)},F=async()=>{if(!b.checked)return W("请阅读并同意用户条款"),!1;if(""==b.form.cnName||""==b.form.idNumber)return W("请填写完善您的个人信息"),q(),!1;if(""==b.address)return W("请选择您的地址"),q(),!1;let a=f.query.channel;console.log(b.address);let l={job:0,gongjijin:0,house:0,vehicle:0,shebao:0,insurance:0,overdue:3},o={job:1,gongjijin:2,house:3,vehicle:3,shebao:2,insurance:2,overdue:0},[s,n,t]=b.address.split("/");for(let e in o)b.zichan.includes(e)&&(l[e]=o[e]);console.log(l);let r={...b.form,...l,province:s,city:n,area:t,channel:a||m.channel,id:i.get("userId")};if(1==(await e("/api/user/updateUserInfo",r)).status){let a="/api/user/match/getAllMatching",l={appType:3,type:7,userId:i.get("userId")},o=await e(a,l);if(console.log(o),o.data&&o.data.length>0)return void p.push({path:"result",query:{ids:o.data[0].conditionId}});p.push({path:"/goods"})}p.push({path:"/goods"})};return(e,a)=>{const i=M,d=O,u=K,m=s,c=n,p=$,f=G,y=L,V=r,k=t,w=I,q=z;return x(),_("article",X,[S("header",Y,[h(u,{"input-align":"right"},{default:U((()=>[h(d,{inset:""},{default:U((()=>[h(i,{name:"姓名",label:"姓名",placeholder:"姓名","model-value":b.form.cnName,"onUpdate:modelValue":a[0]||(a[0]=e=>b.form.cnName=e),rules:[{required:!0,message:"请填写姓名"}]},null,8,["model-value"]),h(i,{name:"身份证号码",label:"身份证号码",placeholder:"身份证号码","model-value":b.form.idNumber,"onUpdate:modelValue":a[1]||(a[1]=e=>b.form.idNumber=e),rules:[{required:!0,message:"请填写身份证号码"}]},null,8,["model-value"])])),_:1})])),_:1})]),S("section",Z,[h(u,{"label-align":"top","input-align":"center"},{default:U((()=>[h(d,{inset:"",class:"addr-box"},{default:U((()=>[h(i,{"label-align":"left","input-align":"right",modelValue:b.address,"onUpdate:modelValue":a[2]||(a[2]=e=>b.address=e),"is-link":"",name:"area",label:"地区选择",placeholder:"点击选择省市区",onClick:a[3]||(a[3]=e=>b.addrShow=!0),disabled:!0},null,8,["modelValue"]),(x(!0),_(B,null,C(P(Q),((e,l)=>(x(),E(i,{name:e.type,label:e.name,"input-align":"center"},N({_:2},["radio"==e.type?{name:"input",fn:U((()=>[h(c,{class:"radio-box",modelValue:b.form[l],"onUpdate:modelValue":e=>b.form[l]=e,direction:"horizontal"},{default:U((()=>[(x(!0),_(B,null,C(e.data,(e=>(x(),E(m,{name:e.value},{default:U((()=>[T(A(e.label),1)])),_:2},1032,["name"])))),256))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),key:"0"}:void 0,"checkboxGroup"==e.type?{name:"input",fn:U((()=>[h(f,{class:"radio-box",modelValue:b.zichan,"onUpdate:modelValue":a[4]||(a[4]=e=>b.zichan=e),direction:"horizontal"},{default:U((()=>[(x(!0),_(B,null,C(e.data,(e=>(x(),E(p,{name:e.value,shape:"square"},{default:U((()=>[T(A(e.label),1)])),_:2},1032,["name"])))),256))])),_:2},1032,["modelValue"])])),key:"1"}:void 0]),1032,["name","label"])))),256))])),_:1}),S("div",J,[h(y,{round:"",block:"",type:"primary",class:"form-btn",onClick:F},{default:U((()=>[T(" 提交 ")])),_:1})])])),_:1}),S("footer",ee,[S("div",ae,[h(V,{class:"checked",modelValue:b.checked,"onUpdate:modelValue":a[5]||(a[5]=e=>b.checked=e),size:"large"},null,8,["modelValue"]),S("span",{onClick:g},"我已阅读同意"),S("span",{class:"pact",onClick:a[6]||(a[6]=e=>{v.value=!0})},"《贷款知情确认书》")]),le])]),h(w,{show:b.addrShow,"onUpdate:show":a[8]||(a[8]=e=>b.addrShow=e),position:"bottom"},{default:U((()=>[h(k,{"area-list":P(l),onConfirm:j,onCancel:a[7]||(a[7]=e=>b.addrShow=!1)},null,8,["area-list"])])),_:1},8,["show"]),h(q,{show:v.value,"onUpdate:show":a[9]||(a[9]=e=>v.value=e),title:"",showCancelButton:!1},{default:U((()=>[S("div",oe,[h(o)])])),_:1},8,["show"])])}}}),[["__scopeId","data-v-fb403e23"]]);export{se as default};
